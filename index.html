<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªá Th·ªëng T·∫°o Tin Nh·∫Øn T√†ng H√¨nh D√†nh </title>
    <style>
        :root {
            --bg-color: #121212;
            --text-color: #e0e0e0;
            --container-bg: #1e1e1e;
            --input-bg: #2d2d2d;
            --accent-color: #bb86fc;
            --button-hover: #9965f4;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .container {
            background-color: var(--container-bg);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
            width: 100%;
            max-width: 800px;
        }
        h1 {
            text-align: center;
            color: var(--accent-color);
            margin-bottom: 10px;
        }
        p.subtitle {
            text-align: center;
            opacity: 0.8;
            margin-bottom: 30px;
            font-size: 0.9em;
        }
        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        @media (max-width: 768px) {
            .grid {grid-template-columns: 1fr;}
        }
        .column { display: flex; flex-direction: column; }
        label { margin-bottom: 10px; font-weight: bold; color: var(--accent-color); }
        textarea {
            background-color: var(--input-bg);
            border: 1px solid #444;
            color: var(--text-color);
            padding: 15px;
            border-radius: 8px;
            resize: vertical;
            height: 150px;
            font-family: monospace;
            font-size: 14px;
        }
        textarea:focus { outline: 2px solid var(--accent-color); }
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 25px 0;
        }
        button {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 16px;
        }
        .btn-encode { background-color: var(--accent-color); color: #000; }
        .btn-decode { background-color: transparent; border: 2px solid var(--accent-color); color: var(--accent-color); }
        button:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(187, 134, 252, 0.3); }
        .btn-encode:hover { background-color: var(--button-hover); }
        .btn-decode:hover { background-color: rgba(187, 134, 252, 0.1); }
        .copy-btn {
            margin-top: 10px;
            padding: 8px 15px;
            font-size: 12px;
            align-self: flex-end;
            background-color: #333;
            color: #aaa;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>L∆∞∆°ng's Secret Messenger</h1>
    <p class="subtitle">H·ªá th·ªëng m√£ h√≥a "Nh·ªã ph√¢n Zero-Width" ƒë·ªôc nh·∫•t. Kh√¥ng lo b·ªã l·ªô tin nh·∫Øn.</p>

    <div class="grid">
        <div class="column">
            <label for="inputText">VƒÉn b·∫£n g·ªëc (C·∫ßn ·∫©n):</label>
            <textarea id="inputText" placeholder="Nh·∫≠p n·ªôi dung b√≠ m·∫≠t v√†o ƒë√¢y... V√≠ d·ª•: 'm√†y ngu qu√°'"></textarea>
        </div>
        <div class="column">
            <label for="outputText">K·∫øt qu·∫£ (T√†ng h√¨nh / ƒê√£ gi·∫£i m√£):</label>
            <textarea id="outputText" placeholder="K·∫øt qu·∫£ s·∫Ω hi·ªán ·ªü ƒë√¢y..." readonly></textarea>
            <button class="copy-btn" onclick="copyResult()">Copy k·∫øt qu·∫£</button>
        </div>
    </div>

    <div class="controls">
        <button class="btn-encode" onclick="handleEncode()">üîí ·∫®n tin nh·∫Øn</button>
        <button class="btn-decode" onclick="handleDecode()">üîì Gi·∫£i m√£ tin nh·∫Øn</button>
    </div>

</div>

<script>
    // --- C·∫§U H√åNH H·ªÜ TH·ªêNG M√É H√ìA M·ªöI ---
    // S·ª≠ d·ª•ng 3 k√Ω t·ª± t√†ng h√¨nh ph·ªï bi·∫øn
    const ZERO = '\u200B'; // Zero Width Space (ƒê·∫°i di·ªán s·ªë 0)
    const ONE = '\u200C';  // Zero Width Non-Joiner (ƒê·∫°i di·ªán s·ªë 1)
    const DELIMITER = '\u200D'; // Zero Width Joiner (D·∫•u ngƒÉn c√°ch c√°c ch·ªØ)

    // H√†m ·∫®n tin nh·∫Øn (Chuy·ªÉn sang nh·ªã ph√¢n t√†ng h√¨nh)
    function encode(text) {
        if (!text) return "";
        let encodedString = "";
        for (let i = 0; i < text.length; i++) {
            // 1. L·∫•y m√£ Unicode c·ªßa k√Ω t·ª±
            const charCode = text.charCodeAt(i);
            // 2. Chuy·ªÉn sang chu·ªói nh·ªã ph√¢n (binary string)
            const binaryString = charCode.toString(2);
            // 3. Thay th·∫ø 0 v√† 1 b·∫±ng k√Ω t·ª± t√†ng h√¨nh
            let hiddenChar = "";
            for (let bit of binaryString) {
                hiddenChar += (bit === '0' ? ZERO : ONE);
            }
            // 4. Th√™m v√†o chu·ªói k·∫øt qu·∫£ v√† th√™m d·∫•u ngƒÉn c√°ch
            encodedString += hiddenChar + DELIMITER;
        }
        // B·ªçc trong m·ªôt c·∫∑p d·∫•u t√†ng h√¨nh ƒë·ªÉ ƒë√°nh d·∫•u l√† tin nh·∫Øn c·ªßa L∆∞∆°ng
        return ZERO + ZERO + encodedString + ZERO + ZERO;
    }

    // H√†m Gi·∫£i m√£ tin nh·∫Øn
    function decode(text) {
        if (!text) return "";
        // Lo·∫°i b·ªè d·∫•u hi·ªáu nh·∫≠n bi·∫øt ·ªü ƒë·∫ßu v√† cu·ªëi
        let cleanText = text.replace(new RegExp(`^${ZERO}${ZERO}`), '').replace(new RegExp(`${ZERO}${ZERO}$`), '');
        
        // T√°ch chu·ªói d·ª±a tr√™n d·∫•u ngƒÉn c√°ch
        const parts = cleanText.split(DELIMITER);
        let decodedString = "";

        for (let part of parts) {
            if (part === "") continue;
            // 1. Chuy·ªÉn ng∆∞·ª£c k√Ω t·ª± t√†ng h√¨nh v·ªÅ 0 v√† 1
            let binaryString = "";
            for (let char of part) {
                if (char === ZERO) binaryString += "0";
                else if (char === ONE) binaryString += "1";
            }
            // 2. Chuy·ªÉn t·ª´ nh·ªã ph√¢n v·ªÅ m√£ Unicode (h·ªá th·∫≠p ph√¢n)
            if (binaryString) {
                const charCode = parseInt(binaryString, 2);
                 // 3. Chuy·ªÉn m√£ Unicode v·ªÅ k√Ω t·ª± g·ªëc
                decodedString += String.fromCharCode(charCode);
            }
        }
        return decodedString;
    }

    // --- X·ª¨ L√ù GIAO DI·ªÜN ---
    function handleEncode() {
        const input = document.getElementById('inputText').value;
        if (!input) { alert("Vui l√≤ng nh·∫≠p n·ªôi dung c·∫ßn ·∫©n!"); return; }
        const encoded = encode(input);
        // Ch√®n th√™m m·ªôt ch√∫t text th∆∞·ªùng ƒë·ªÉ d·ªÖ copy (t√πy ch·ªçn)
        document.getElementById('outputText').value = "Tin nh·∫Øn ·∫©n c·ªßa L∆∞∆°ng: [" + encoded + "]";
    }

    function handleDecode() {
        let input = document.getElementById('inputText').value;
        if (!input) { alert("Paste tin nh·∫Øn c·∫ßn gi·∫£i m√£ v√†o √¥ b√™n tr√°i!"); return; }

        // L·ªçc ch·ªâ l·∫•y ph·∫ßn n·∫±m trong ngo·∫∑c vu√¥ng [] n·∫øu c√≥
        const match = input.match(/\[(.*?)\]/);
        if (match && match[1]) {
            input = match[1];
        }

        try {
            const decoded = decode(input);
            if (!decoded) throw new Error("Kh√¥ng t√¨m th·∫•y n·ªôi dung ·∫©n h·ª£p l·ªá.");
             document.getElementById('outputText').value = decoded;
        } catch (e) {
             document.getElementById('outputText').value = "L·ªói: ƒê√¢y kh√¥ng ph·∫£i l√† tin nh·∫Øn ·∫©n do h·ªá th·ªëng n√†y t·∫°o ra, ho·∫∑c ƒë√£ b·ªã h·ªèng.";
        }
       
    }

    function copyResult() {
        const outputText = document.getElementById('outputText');
        outputText.select();
        document.execCommand('copy');
        alert("ƒê√£ copy k·∫øt qu·∫£ v√†o b·ªô nh·ªõ t·∫°m!");
    }
</script>

</body>
</html>
